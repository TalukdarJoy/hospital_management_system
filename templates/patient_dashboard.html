<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Patient Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="top-bar">
        <span class="hospital-title">LifeLine System - Patient</span>
        <div class="top-links">
            <a href="{{ url_for('index') }}">Home</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>

    <div class="patient-container">
        <h1 class="patient-title">Patient Dashboard</h1>
        
        <!-- Welcome Section -->
        <div class="patient-welcome-box">
            <span class="welcome-text">Welcome, {{ patient.name }}</span>
        </div>

        <!-- Upcoming Appointments Section -->
        <div class="patient-section">
            <h2 class="section-title">Upcoming Appointments</h2>
            <div class="table-wrapper">
                <table class="patient-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Doctor Name</th>
                            <th>Department</th>
                            <th>Status</th>
                            <th>Treatment</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for appointment in appointments %}
                        <tr>
                            <td>{{ appointment.appointment_date }}</td>
                            <td>{{ appointment.appointment_time }}</td>
                            <td>Dr. {{ appointment.doctor.name }}</td>
                            <td>{{ appointment.doctor.specialization }}</td>
                            <td>
                                <span class="status-badge status-{{ appointment.status.lower() }}">
                                    {{ appointment.status }}
                                </span>
                            </td>
                            <td>
                                <button class="btn-view-treatment" onclick="window.location.href='{{ url_for('treatment', appointment_id=appointment.id) }}'">
                                    view treatment
                                </button>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="6" class="empty-message">No upcoming appointments</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Available Doctors Section -->
        <div class="patient-section">
            <h2 class="section-title">Available Doctors</h2>
            <div class="doctors-grid">
                {% for doctor in doctors %}
                <div class="doctor-card">
                    <div class="doctor-card-header">
                        <div class="doctor-icon">üë®‚Äç‚öïÔ∏è</div>
                        <div class="doctor-main-info">
                            <h3>Dr. {{ doctor.name }}</h3>
                            <p class="doctor-dept">{{ doctor.specialization }}</p>
                        </div>
                    </div>
                    <div class="doctor-card-body">
                        <p class="doctor-exp">
                            <span class="exp-label">Specialization:</span> 
                            {{ doctor.specialization }}
                        </p>
                        <p class="doctor-exp">
                            <span class="exp-label">Year's Of Experience:</span> 
                            {{ doctor.experience}}
                        </p>
                    </div>
                    <div class="doctor-card-actions">
                        <button class="btn-check-availability" onclick="window.location.href='{{ url_for('view_doc_availability', doctor_id=doctor.id) }}'">
                            Check Availability & Book
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="empty-doctors">
                    <p>No doctors available at the moment</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="bottom-bar">
        <p>LifeLine Hospital System 2025</p>
    </div>
</body>
</html>